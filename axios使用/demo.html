<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://cdn.bootcdn.net/ajax/libs/axios/1.2.1/axios.js"></script>
</head>
<body>
    <button id="btn">点击获取所有信息</button>  <br>
    <input  id="ipt" type="text"> <button id="btn2">点击获取指定信息</button>
    <br><br>
    <input type="text" id="addname">
    <input type="text" id="addage">
    <button id="btn3">点击添加</button>
    <br>

    <button id="btn4">点击删除</button><br>
    <br>

    <button id="chou">点击抽奖</button>



    <script>
        let btn = document.querySelector('#btn');
        let btn2 = document.querySelector('#btn2');
        let btn3 = document.querySelector('#btn3');
        let btn4 = document.querySelector('#btn4');
        let ipt = document.querySelector('#ipt')
        let addname = document.querySelector('#addname')
        let addage = document.querySelector('#addage')
        btn.addEventListener('click',function(){
            // axios({
            //     url:'http://localhost:3000/posts',
            //     method:'GET'
            // }).then(
            //     res =>{ console.log(res);},
            //     err =>{console.log(err);}
            // )
            axios.get('http://localhost:3000/posts').then(
                res =>{console.log(res.data);},
                err =>{console.log(err);}
            )
        })

        btn2.onclick = function(){
        //    axios({
        //     url:'http://localhost:3000/posts',
        //     method:'GET',
        //     params:{id:ipt.value}
        //    }).then(
        //     res =>{console.log(res.data[0]);},
        //     err => {console.log(err);}
        //    )

           axios.get('http://localhost:3000/posts',{params:{id:ipt.value}}).then(
            res =>{console.log(res.data[0]);},
            err => {console.log(err);}
           )
        }

        btn3.onclick = ()=>{
            axios.post('http://localhost:3000/posts',{
                name:addname.value,
                age:addage.value
            }).then(
                res =>{'成功',console.log(res);},
                err =>{'失败',console.log(err);}

            )
        }

        btn4.onclick = ()=>{
            axios.delete('http://localhost:3000/posts/5',{
                
            }).then(
                res =>{'成功',console.log(res);},
                err =>{'失败',console.log(err);}

            )
        }


        function rand(m,n){
            return Math.ceil(Math.random() * (n-m+1)) + m-1;
        }
        chou = document.querySelector('#chou')

        chou.addEventListener('click',function(){
        //    setTimeout(() => {
        //     if(rand(1,100) <= 30){
        //         alert('中奖')
        //     }else{
        //         alert('没中')
        //     }         
        //    }, 1000);

         const p = new Promise((resolve,reject) =>{
            setTimeout(()=>{
                if (rand(1,100) <=30) {
                    resolve()
                }else{
                    reject()
                }
            },1000)
         });
         p.then(()=>{
            alert('成功')
         },()=>{
            alert('失败')
         })
        })

    </script>
</body>
</html>